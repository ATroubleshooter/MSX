NestorBASIC version 1.11
Автор Nestor Soriano (Konami Man), Декабрь 2004

1. ЧТО ТАКОЕ NESTORBASIC?

NestorBASIC это набор подпрограмм(функций,процедур) в машинном коде, интегрированных в один файл, 
презназначенных для использования в программах, написанных на MSX-BASIC. NestorBASIC обеспечивает, 
без утраты совместимости с Turbo-BASIC, следующую функциональность:

- Полный доступ ко всей страничной оперативной памяти компьютера(всей памяти, в 
  случае DOS 1, всей свободной памяти в случае DOS 2), вплоть до 4 Mb.
- Доступ ко всей видеопамяти(VRAM), с возможностью пересылки блоков данных как
  в пределах VRAM, так и между VRAM и RAM.
- Размещение БЕЙСИК-программ в страничной памяти, с возможностью поочередно(ПЕРЕХОД ИЗ ОДНОЙ ПРОГРАММЫ В ДРУГУЮ С СОХ ПЕ?)
  работать с разными программами без нарушения целостности переменных.
- Доступ к файлам на диске и непосредственно к физическим секторам, с
  возможностью чтения/записи напрямую в/из страничной RAM и VRAM. Поиск файлов, 
  работа с директориями.
- Сжатие и распаковка графики.
- Проигрывание Moonblaster-музыки. Подгрузка samplekit'ов.
- Воспроизведение звуковых эффектов на PSG(AY-3-8910).
- Вызов подпрограмм в машинном коде, находящихся в BIOS, SUB-BIOS, в области
  рабочего ОЗУ БЕЙСИК-а, рабочей области системы, или в банке страничного ОЗУ.
- Вызов функций NestorMan, процедур InterNestor Suite и InterNestor Lite.

Все имеющиеся функции доступны через один единственный USR и массив
целочисленных параметров, следовательно они полностью совместимы с TurboBASIC.
Собственно, сам компилятор TurboBASIC содержится в файле NestorBASIC, и
автоматически загружается при резидентной загрузке NestorBASIC.

NestorBASIC загружается в страницу ОЗУ, не используемую БЕЙСИК-ом, так что нужен
лишь небольшой объем основной памяти BASIC'a (примерно 500 байт) для программы 
перехода. Остальная основная память BASIC'а свободна для программы на БЕЙСИК-е.


2. СИСТЕМНЫЕ ТРЕБОВАНИЯ. ЗАГРУЗКА NESTORBASIC

NestorBASIC работает на любой MSX2/2+/Turbo-R с как минимум 128Кб страничной 
памяти. В случае с DOS 2 нужен хотя бы один свободный банк ОЗУ в первичном
маппере (два, если собираетесь использовать проигрыватели музыки. См. секцию 8 
для подробностей).

Для загрузки NestorBASIC, просто выполните BLOAD"NBASIC.BIN",R. Ни
предварительных, ни последующих команд CLEAR или DEFUSR не требуется. Если
все прошло без ошибок, мы получаем следующее:

- NestorBASIC и TurboBASIC загружены, каждый в свою страницу ОЗУ, и готовы к
работе.

- Размер свободной основной памяти BASIC'a уменьшился прим. на 500 байт, 
которые были заняты программой, осуществляющей переход в страницу NestorBASIC'a.

- Первый USR [USR0(параметр) или просто USR(параметр)] указывает на
вышеупомянутую программу перехода. Это обработчик вектора вызова функций
NestorBASIC.

- Создан целочисленный массив параметров P. Этот массив используется для передачи
параметров в функции NestorBASIC'a, и приема из них результатов. Коды ошибок 
возвращаются USR-командой. (Функции для работы с файлами и функции обработки строк
требуют собственный строковый массив, который нужно объявлять отдельно.
См. секцию 4 для подробностей). Первые пять элементов P инициализированы следующим
образом:
